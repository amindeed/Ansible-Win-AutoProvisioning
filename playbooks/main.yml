---
# ansible-playbook main.yml -i ../inventories/environments/dev.yml

#- name: "Gather and display all facts"
#  hosts: all
#  tags: gatherfacts
#  tasks:
#    - name: "Gather all facts
#      setup:
#    - name: "Display all gathered facts
#      debug:
#        var: ansible_facts

#- name: "Show all variables"
#  hosts: all
#  tags: gatherfacts
#  tasks:
#    - name: Show all variables
#      ansible.builtin.debug: msg="{{ lookup('ansible.builtin.varnames', '.+')}}"

#https://nodejs.org/dist/v14.17.3/node-v14.17.3-x64.msi

#- name: Setup Node.JS versions 14, 16 and 18
#  hosts: all
#  gather_facts: no
#  tags: nodejs
#  roles:
#    - role: setup-nodejs
#      vars:
#        pre_setup:
#          installations:
#            software_components:
#              - software_fullname: "nvm-windows"
#                file_relative_url: nodejs/nvm-noinstall.zip
#                type: zip
#                root_install_dir: D:\AppServ
#                startmenu_shortcut: no # Default: yes
#          configurations:
#            update_resource:
#              - resource_type: env_var
#                resource_name: NVM_HOME
#                value: D:\AppServ\nvm-windows
#                action: create
#                abort_on_failure: yes # Default: 'no'
#              - resource_type: env_var
#                resource_name: NVM_SYMLINK
#                value: D:\AppServ\nvm_windows\nodejs_symlinks
#                action: create
#                abort_on_failure: yes # Default: 'no'
#              - resource_type: env_var
#                resource_name: PATH
#                value: '%NVM_HOME%;%NVM_SYMLINK%'
#                action: append
#                abort_on_failure: yes # Default: 'no'

# ...
- name: Setup Node.JS versions 14, 16 and 18
  hosts: all
  gather_facts: no
  tags: nodejs
  roles:
    - role: setup-nodejs
      vars:
        pre_setup:
          installations:
            software_components:
              - software_fullname: "nvm-windows" 
                file_relative_url: nodejs/nvm-noinstall.zip
                type: zip
                root_install_dir: D:\AppServ

